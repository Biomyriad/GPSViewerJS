<!doctype html>
<html lang="en">


<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <title>Dropbox Login</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <link rel="stylesheet" href="styles.css">

  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/dropbox@10.34.0/dist/Dropbox-sdk.min.js"></script> -->
  <!-- <script src="dbApi.js"></script> -->
  
  <script src="cloudDb.js" ></script>
  <script src="reports.js" ></script>

</head>
<body>


  <div class="container" style="margin-top: 50px;">

    <div style="display: flex; justify-content: space-around; align-items: center; margin-bottom: 40px;">
      <button  onClick="dateNav()"><-</button>
      <input id="shift-date" type="date" style="width: 150px; margin: 0;">
      <button onClick="dateNav2()">-></button>
      
    </div>
    <hr>

    <!-- <h4>Reports</h4> -->

    <article id="recordslist" ><summary aria-busy="true"></summary></article>

    <!-- <button onClick="tst()">Load Reports</button> -->

    <div id="out"></div>
  </div>


  <script>
    // WORST CODE EVER!!! PROTOTYPE P.O.C.
    // IM SORRY IF YOUR READING THIS  

    preLoad()

    let xx = document.getElementById("shift-date").value
    setTimeout(function() {loadReports(addDays(new Date(xx),1))}, 1000);

function dateNav() {
  let shiftDate = document.getElementById('shift-date')
  shiftDate.value = subDays(new Date(shiftDate.value), 1).toLocaleDateString('en-CA')
  shiftDate.onchange({currentTarget: shiftDate})
}

function dateNav2() {
  let shiftDate = document.getElementById('shift-date')
  shiftDate.value = addDays(new Date(shiftDate.value), 2).toLocaleDateString('en-CA')
  shiftDate.onchange({currentTarget: shiftDate})
}
  </script>

</body>

</html>